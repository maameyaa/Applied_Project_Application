<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8-"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title> MTLP || Lesson</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <script src='https://code.responsivevoice.org/responsivevoice.js'></script>

</head>


<body onload="getContent()">
  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo"><i class="large material-icons right">cloud</i> </a>
      <ul class="right hide-on-med-and-down">
        <li><a class='dropdown-button btn' href="#" data-activates='dropdown1' color='light-blue'>Menu</a></li>

        <!-- Drop down menu -->
       <ul id='dropdown1' class='dropdown-content'>
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="lessons.html">Lessons</a></li>
           <li><a href="timer.html">Timer </a></li>
          <li><a href="assesment.html">Assessment</a></li>
          <li><a href="profile.html">Teaching and Learning Materials</a></li>
          <li class="divider"></li>
          <li><a href="index.html">Logout</a></li>
        </ul>
      </ul>

      <ul id="nav-mobile" class="side-nav">
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="lessons.html">Lessons</a></li>
           <li><a href="timer.html">Timer </a></li>
          <li><a href="assesment.html">Assessment</a></li>
          <li><a href="profile.html">Teaching and Learning Materials</a></li>
          <li class="divider"></li>
          <li><a href="index.html">Logout</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>

  <div class="container">
    <div class="section">

    <div class=lang></div>

     <div class="row">

          <div class= "col s6">
              <div class='wd'> </div> 
          </div>
      </div>
      <div class="row">
              <div class= "col s12">
                    <a href ="lessons.html" class=" col s6">Back</a>
                   <a href ="revision.html"  class=" right">Next</a>
              </div>
       </div>

      <div id="divStatus" class="status"></div>

      <div class="row">
        <div class="col s12 m12">
          <div class="card  darken-1">
            <div class="card-content black-text">
              <span class="card-title">Objectives</span>
             <div class = "objectives"></div>
            </div>
          </div>
          </div>
        </div>
      

     <div class="row">
        <div class="col s12 m12">
          <div class="card  darken-1">
            <div class="card-content black-text">
              <span class="card-title">Lesson Preparation</span>
               <div class = "lesson_prep"></div>
            </div>
          </div>
        </div>
     </div>

     <div class= "twi_lcbd">
       <div class="row">
          <div class="col s12 m12">
            <div class="card  darken-1">
              <div class="card-content black-text">
                <span class="card-title">Letters, Consonant Blends or Digraph</span>
                 <div class = "lcbd"></div>
              </div>
            </div>
          </div>
       </div>
      </div>

     <div class = "twi_sight_words">
       <div class="row">
          <div class="col s12 m12">
            <div class="card  darken-1">
              <div class="card-content black-text">
                <span class="card-title">Sight Words</span>
                 <div class = "sight_words"></div>
              </div>
            </div>
          </div>
       </div>
      </div>

      <div class = "eng_vocab">
       <center><div class="row">
          <div class="col s12 m12">
            <div class="card">
              <div class="card-content black-text">
                <span class="card-title">Vocabulary</span>
                <div id="vocab" class = "vocab"></div>
              </div>
            </div>
          </div>
        </div>
      </center>
    </div>
   </div>
  </div>

   <footer class="light-blue darken-1">
          <div class="footer-copyright" >
            <div class="container">

            <div class="row"> 
              <div class="col s8">
              <a href ="lessons.html" class="waves-effect waves-light btn">Back</a>
              </div>

              <div class="col s4">

                  <a class="right"><a href ="revision.html" class="waves-effect waves-light btn">Next</a></a>
              </div>
            </div>
         </div>

          </div>
  </footer>
  

  <!--  Scripts-->

  <script type="text/javascript">

  var lesson_id = sessionStorage.lid;
  var lang = sessionStorage.lang;

    function getContent(){
       getWeekDay();
       getObjectives();
       getLessonPrep();
 
       if (lang == "English"){
          $('.twi_lcbd').hide();
          $('.twi_sight_words').hide();
          vocab(); 
        }
        else{
          $('.eng_vocab').hide();
          lcbd();
          sight_words();
        }
    }

    function getWeekDay(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=4&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:getWeekDayComplete});
    }

    function getObjectives(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=5&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:getObjectivesComplete});
    }

    function getLessonPrep(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=6&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:getLessonPrepComplete});
    }

    function vocab(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=9&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:vocabComplete});
    }

    function lcbd(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=13&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:lcbdComplete});
    }

    function sight_words(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=14&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:swComplete});
    }

    function getWeekDayComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lessons");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);
          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting lesson");
          return;

          }

          else{
              $('.wd').append
              ("<h6>Week "+obj.week+" Day "+obj.day+"</h6>"
                );

              $('.lang').append
              ("<h5> "+sessionStorage.lang+" Lesson</h5>"
                );

            }
    }

    function getObjectivesComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lessons");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);

          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting objectives");
          return;

          }

          else{
            var length=obj.length;

                for(var i=0; i<length; i++){
                  $('.objectives').append              
                ("<p> "+obj[i].text+"</p>");
              }
              
            }
    }

    function getLessonPrepComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lessons prep");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);

          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting lessons prep 2");
          return;

          }

          else{

                var length=obj.length;

                for(var i=0; i<length; i++){

                  

                  $('.lesson_prep').append             
                ("<p style='white-space: pre-line; text-align: justify;'> "+obj[i].text+"</p>");
              }
            }
    }

    function vocabComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lesson");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);

          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting lesson");
          return;

          }

          else{
              var length=obj.length;

              for(var i=0; i<length; i++){
               
               

                $('.vocab').append
                ("<input onclick='responsiveVoice.speak(&apos;"+obj[i].text+"&apos;);' type='button' value='ðŸ”Š "+obj[i].text+"' /> <br></br>"
                  )
            }
          }
  }

  function lcbdComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lesson");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);

          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting lesson");
          return;

          }

          else{

              $('.lcbd').append
              ("<p style='white-space: pre-line; text-align: justify;'> "+obj[0].text+"</p>");
            }
      }     

      function swComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lesson");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);

          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting lesson");
          return;

          }

          else{

              var length=obj.length;

              for(var i=0; i<length; i++){

              $('.sight_words').append
              ("<p style='white-space: pre-line; text-align: justify;'> "+obj[i].text+"</p>");

// alert("&apos;"+obj[1].audio+"&apos;");
                $('.sight_words').append
                ("<audio controls><source src='"+obj[i].audio+"'; type='audio/mpeg'></audio>");

            }

            }
      } 
   </script>

  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
   
  </body>
</html>
