<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title> MTLP || Looking Ahead</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>


<body onload="getContent()">
  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo"><i class="large material-icons right">cloud</i> </a>
      <ul class="right hide-on-med-and-down">
        <li><a class='dropdown-button btn' href="#" data-activates='dropdown1' color='light-blue'>Menu</a></li>

        <!-- Drop down menu -->
       <ul id='dropdown1' class='dropdown-content'>
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="lessons.html">Lessons</a></li>
           <li><a href="timer.html">Timer </a></li>
          <li><a href="assesment.html">Assessment</a></li>
          <li><a href="profile.html">Teaching and Learning Materials</a></li>
          <li class="divider"></li>
          <li><a href="index.html">Logout</a></li>
        </ul>
      </ul>

      <ul id="nav-mobile" class="side-nav">
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="lessons.html">Lessons</a></li>
           <li><a href="timer.html">Timer </a></li>
          <li><a href="assesment.html">Assessment</a></li>
          <li><a href="profile.html">Teaching and Learning Materials</a></li>
          <li class="divider"></li>
          <li><a href="index.html">Logout</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>

  <div class="container">
    <div class="section">

    <div class=lang></div>

    <div class="row">

          <div class= "col s6">
              <div class='wd'> </div> 
          </div>
   </div>
   <div class="row">
              <div class= "col s12">
                    <a onclick="nextpage()" class=" col s6">Back</a>
                   <a   href ="lessons.html"class=" right">Back to Lessons</a>
              </div>
    </div>

      <center><div id="divStatus" class="status"></div></center>

      <div class="row">
        <div class="col s12 m12">
          <div class="card  darken-1">
            <div class="card-content black-text">
              <span class="card-title">Looking Ahead</span>
             <div class = "content"></div>

             <div class="card-action ">
              <a href="timerstart.html">Start Timer <i class="material-icons ">av_timer</i></a>
            </div>
            </div>
          </div>
        </div>
       </div>

       <!-- <div class="row">
        <div class="col s12 m12">
          <div class="card  darken-1">
            <div class="card-content black-text">
             <div class = "part2"></div>
            </div>
          </div>
        </div>
       </div>

       <div class="row">
        <div class="col s12 m12">
          <div class="card  darken-1">
            <div class="card-content black-text">
             <span class="card-title">Teacher's Notes</span>
             <div class = "teachersnotes"></div>
            </div>
          </div> -->
        <!-- </div> -->
       <!-- </div> -->
   </div>
   </div>

  
  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script type="text/javascript">

  var lesson_id = sessionStorage.lid;

    function getContent(){
       getWeekDay();
       getLA();
       getTime();
    }

     function nextpage(){
      

      if (lang=="Twi") {
        
        window.location.href ="writing.html"
      }
      else{
        window.location.href ="comprehension.html"
      }

    }


    function getWeekDay(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=4&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:getWeekDayComplete});
    }

    function getLA(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/lessonajax.php?cmd=12&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:getLAComplete});
    }


    function getWeekDayComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting lessons");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);
          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting lesson");
          return;

          }

          else{
              $('.wd').append
              ("<span>Week "+obj.week+" Day "+obj.day+"</span>"
                );
            }
    }

    function getLAComplete(xhr,status){
      if(status!="success"){

            $('#divStatus').html("Error while getting Phonemic");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);

          console.log(obj);


          if(obj.result==0){

          $('#divStatus').html("Error getting phonemic");
          return;

          }

          else{

               $('.content').append
               ("<p style='white-space: pre-line; text-align: justify;'> "+obj[0].text+"</p>");


               // $('.teachersnotes').append
               // ("<p style='white-space: pre-line; text-align: justify;'> "+obj[0].teachers_notes+"</p>");
           
            }
    }

      function getTime(){
        var ajaxPageUrl="http://mtlp-application.000webhostapp.com/Applied_Project_Application/timerajax.php?cmd=1&lid="+lesson_id+"";

        $.ajax(ajaxPageUrl,
          {async:true,
           complete:getTimeComplete});
    }

     function getTimeComplete(xhr,status){
       if(status!="success"){

            $('#divStatus').html("Error while getting time");

         return;    
         }

          var obj=$.parseJSON(xhr.responseText);
          console.log(obj);

          //alert(obj);

          if(obj.result==0){

          $('#divStatus').html("Error getting time");
          return;

          }

          else{

            sessionStorage.mintime = obj[0].lookingAhead_min;
            sessionStorage.maxtime = obj[0].lookingAhead_max;

            //alert( sessionStorage.mintime);
            // alert( sessionStorage.maxtime);

          }
        }
    </script>
  </body>

  <footer class="light-blue darken-1">
          <div class="footer-copyright" >
            <div class="container">

            <div class="row"> 
              <div class="col s8">
                <a href ="phonemic.html" class="waves-effect waves-light btn">Back</a>
              </div>

              <div class="col s4">
                <a href ="openlesson.html" class="waves-effect waves-light btn">Next Lesson</a>
              </div>
            </div>
            
          </div>
        </footer>
</html>
